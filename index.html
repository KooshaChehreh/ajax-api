<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="sapramin.css">
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="https://code.iconify.design/iconify-icon/1.0.5/iconify-icon.min.js"></script>

</head>
<body id="div-bg">

<div class="main">
    <div class="row">
        <div class="col-3">
            <div class="weather-card one parent">
                <div class="top">
                    <img src="./images/Sapramin%20logo-3.png" class="img1">
                    <div class="wrapper">
                        <!--						<div class="mynav">-->
                        <!--							<a href="javascript:;"><span class="lnr lnr-chevron-left"></span></a>-->
                        <!--							<a href="javascript:;"><span class="lnr lnr-cog"></span></a>-->
                        <!--						</div>-->
                        <h1 id="description" class="heading mt-5"></h1>
                        <h3 class="location mt-1 mb-0">Tehran, Iran</h3>
                        <p class="temp m-0">
                            <span id="weather1" class="temp-value"></span>
                            <span class="deg">0</span>
                            <a href="javascript:;"><span class="temp-type">C</span></a>
                        </p>
                        <h3 class="location">Last Update</h3>
                        <p id="today" class="temp" style="font-size: 15px; color: white"></p>
                        <div class="d-flex flex-row justify-content-center">
                        <iconify-icon style="color: aliceblue" class="pr-2 mt-4 pt-1" icon="bi:sunrise-fill"></iconify-icon>
                        <h3 class="location">
                            Sunrise</h3>
                            </div>
                        <p id="sunrise" class="temp mt-1 ml-2" style="font-size: 15px; color: white"></p>
                        <div class="d-flex flex-row justify-content-center">
                        <iconify-icon style="color: aliceblue" class="pr-2 mt-4 pt-1" icon="bi:sunset-fill"></iconify-icon>
                        <h3 class="location">
                            Sunset</h3>
                            </div>
                        <p id="sunset" class="temp mt-1 ml-2" style="font-size: 15px; color: white"></p>

                    </div>
                </div>
                <div class="bottom">
                    <div class="wrapper">
                        <ul class="forecast">
                            <!--                            <a href="javascript:;"><span class="lnr lnr-chevron-up go-up"></span></a>-->
                            <li class="active mt-3">
								<span class="lnr condition">
									<span id="max-temp" class="temp mt-2" style="font-size: 20px"><span
                                            class="deg">0</span><span
                                            class="temp-type">C</span></span>
								</span>
                                <span class="date" style="font-size: 20px">Max Temperature</span>
                            </li>
                            <li class="active">
                                <span class="date" style="font-size: 20px">Min Temperature</span>
                                <span class="lnr condition">
									<span id="min-temp" class="temp mt-2" style="font-size: 20px"><span
                                            class="deg">0</span><span
                                            class="temp-type">C</span></span>
								</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-1 col-1">

        </div>
        <div class="col-3">
            <div class="weather-card one parent">
                <div class="top" >
                    <div class="middle " >
                    <div class="wrapper" >
                        <ul class="forecast">
                            <li class="active mt-3 d-flex justify-content-between">
								<span class="date" style="font-size: 20px">AED <span style="font-size: 13px">(-)</span></span>
                                <span class="lnr condition">
									<span id="aed" class="temp mt-1" style="font-size: 20px"><span
                                            class="temp-type"></span></span>
								</span>
                            </li>
                            <li class="active d-flex justify-content-between">
                                <span class="date" style="font-size: 20px">GBP <span style="font-size: 13px">(£)</span></span>
                                <span class="lnr condition">
									<span id="gbp" class="temp mt-1" style="font-size: 20px"><span
                                            class="temp-type"></span></span>
                            </li>
                            <li class="active d-flex justify-content-between">

                                <span class="date" style="font-size: 20px">CAD <span style="font-size: 13px">($)</span></span>
                                <span class="lnr condition">
									<span id="cad" class="temp mt-1" style="font-size: 20px"><span
                                            class="temp-type"></span></span>
								</span>
                            </li>
                            <li class="active d-flex justify-content-between">
                                <span class="date" style="font-size: 20px">AUD <span style="font-size: 13px">($)</span></span>
                                <span class="lnr condition">
									<span id="aud" class="temp mt-1" style="font-size: 20px"><span
                                            class="temp-type"></span></span>
								</span>
                            </li>
                            <li class="active d-flex justify-content-between">
                                <span class="date" style="font-size: 20px">CNY <span style="font-size: 13px">(¥)</span></span>
                                <span class="lnr condition">
									<span id="cny" class="temp mt-1" style="font-size: 20px"><span
                                            class="temp-type"></span></span>
								</span>
                            </li>
                        </ul>
                    </div>
                </div>
                    <img src="./images/Sapramin%20logo-3.png" class="img1">
                    <div class="wrapper">


                    </div>
                </div>
                <div class="bottom">
                    <div class="wrapper">
                        <ul class="forecast">
                            <li class="active mt-3">
								<span class="lnr condition">
									<span id="dollar" class="temp mt-2" style="font-size: 20px"><span
                                            class="temp-type"></span></span>
								</span>
                                <span class="date" style="font-size: 20px">US Dollar <span
                                        style="font-size: 13px">($)</span></span>
                            </li>
                            <li class="active">
                                <span class="date" style="font-size: 20px">Euro <span style="font-size: 13px">(€)</span></span>
                                <span class="lnr condition">
									<span id="euro" class="temp mt-2" style="font-size: 20px"><span
                                            class="temp-type"></span></span>
								</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-1 col-1">

        </div>
        <div class="col-3">
            <div class="weather-card one parent">
                <div class="top">
                    <img src="./images/Sapramin%20logo-3.png" class="img1">
                    <div class="wrapper">

                    </div>
                </div>
                <div class="bottom">
                    <div class="wrapper">
                        <ul class="forecast">
                            <li class="active mt-3">
<!--								<span class="lnr condition">-->
<!--									<span class="temp" style="font-size: 20px"><span-->
<!--                                            class="deg">0</span><span-->
<!--                                            class="temp-type">C</span></span>-->
<!--								</span>-->
<!--                                <span class="date" style="font-size: 20px"></span>-->
                            </li>
                            <li class="active">
<!--                                <span class="date" style="font-size: 20px"></span>-->
<!--                                <span class="lnr condition">-->
<!--									<span class="temp" style="font-size: 20px"><span-->
<!--                                            class="deg">0</span><span-->
<!--                                            class="temp-type">C</span></span>-->
<!--								</span>-->
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-1 col-1">

        </div>

    </div>
</div>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script>
    changeImage()
    getCurrency()
    getTime()
    getweather()
    setInterval(getTime, 60000)
    setInterval(getCurrency, 180000)
    setInterval(getweather, 1800000)
    setInterval(changeImage, 43200000)

    function getTime() {
        const xhttp = new XMLHttpRequest();
        const url2 = "https://prayer.aviny.com/api/prayertimes/1"
        xhttp.open("GET", url2);
        xhttp.send();
        xhttp.onload = function () {
            let data1 = JSON.parse(this.response);
            $("#sunrise").html(data1.Sunrise);
            $("#sunset").html(data1.Sunset);
            $("#today").html(data1.Today);

        }

    }

    function getweather() {
        const xhttp = new XMLHttpRequest();
        const url = "https://api.openweathermap.org/data/2.5/" +
            "weather?lat=35.7219&lon=51.3347&appid=3b1e1d4cd0e687a701fc73afdbcdfdbc&units=metric"
        xhttp.open("GET", url);
        xhttp.send();
        xhttp.onload = function () {
            let data = JSON.parse(this.response);
            $("#weather1").html(Math.round(data.main.temp) + "<br/>");
            $("#description").html(data.weather[0].description.charAt(0).toUpperCase() + data.weather[0].description.slice(1));
            $("#max-temp").html(Math.round(data.main.temp_max) + "<span class='deg'>0</span><span class='temp-type'>C</span>");
            $("#min-temp").html(Math.round(data.main.temp_min) + "<span class='deg'>0</span><span class='temp-type'>C</span>");

        }
    }

    function getCurrency() {
        const xhttp = new XMLHttpRequest();
        const url = "http://nerkh-api.ir/api/7f6b146d0ddd108174e31c43ee616152/currency/"
        xhttp.open("GET", url);
        xhttp.send();

        xhttp.onload = function () {
            let data = JSON.parse(this.response);
            $("#dollar").html(new Intl.NumberFormat().format(Math.round(data.data.prices.USD.current)/10) + "<span class='temp-type' style='font-size: 8px'> Tomans</span>");
            $("#euro").html(new Intl.NumberFormat().format(Math.round(data.data.prices.EUR.current)/10) + "<span class='temp-type' style='font-size: 8px'> Tomans</span>");
            $("#cad").html(new Intl.NumberFormat().format(Math.round(data.data.prices.CAD.current)/10) + "<span class='temp-type' style='font-size: 8px'> Tomans</span>");
            $("#aud").html(new Intl.NumberFormat().format(Math.round(data.data.prices.AUD.current)/10) + "<span class='temp-type' style='font-size: 8px'> Tomans</span>");
            $("#cny").html(new Intl.NumberFormat().format(Math.round(data.data.prices.CNY.current)/10) + "<span class='temp-type' style='font-size: 8px'> Tomans</span>");
            $("#aed").html(new Intl.NumberFormat().format(Math.round(data.data.prices.AED.current)/10) + "<span class='temp-type' style='font-size: 8px'> Tomans</span>");
            $("#gbp").html(new Intl.NumberFormat().format(Math.round(data.data.prices.GBP.current)/10) + "<span class='temp-type' style='font-size: 8px'> Tomans</span>");
        }
    }

    function changeImage() {
        const xhttp = new XMLHttpRequest();
        const url = 'https://www.bing.com/HPImageArchive.aspx?format=js&idx=0&n=1&mkt=en-US'
        xhttp.open("GET", url);
        xhttp.send();
        xhttp.onload = function () {
            let data = JSON.parse(this.response);
            console.log(data)
            let img_url = 'www.bing.com' + data.images[0].url
            let img = 'url(' + img_url + ')'
            console.log(img)
            $("#div-bg").html.style.backgroundImage(img)
        }
    }
</script>

</body>
</html>


